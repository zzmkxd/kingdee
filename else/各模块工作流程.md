# 项目各模块工作流程
(待补充部分:应用API接口,亮点算法(欢欢子那篇论文?
![图片](https://docimg7.docs.qq.com/image/AgAAEdPAb43HEGF7OZRG-7z_092xHZ-F.png?w=2602&h=3744)



# Ⅰ 用户模块
## 模块概述
实现用户全生命周期管理，包括身份认证、权限分配及个性化配置，为系统各模块提供基础用户服务支撑。

---

## 工作流详细描述
### 1. 注册与初始化
​用户角色​
- 学生：需验证学籍信息
- 教师：需验证教职工号
​注册流程​
1. 选择身份类型（学生/教师）
2. 填写基础信息：
    - 学生：学号 + 教务系统密码验证
    - 教师：工号 + 人事系统验证
3. 设置安全信息：手机号绑定 + 二次验证邮箱
4. 完成初始偏好配置：
    - 任教课程关联（教师）

技术实现

- 使用MD5算法存储密码哈希
- AES-256加密存储敏感个人信息
- 触发器自动维护 teaching_courses 外键有效性

​特殊处理​
- 学生账号自动关联班级/专业信息
- 教师账号触发课程权限初始化流程

数据流转

- 注册信息写入 user 表，角色信息分别写入 student_profile 或 teacher_profile 表
- 权限信息通过 user_role 表关联
- 初始化教学课程权限（user_course_access）

---

### 2. 登录与身份认证
​认证方式​
- 标准登录：账号密码 + 短信验证码
- 快速认证：校园统一身份认证系统对接
​安全机制​
安全机制

- 登录失败次数限制（5次/小时）
- 异地登录邮件通知
- 会话管理： Redis存储会话信息（session:user:{sessionId}）--（java大作业
- 敏感操作二次验证
---
### 3. 权限管理
​权限层级​
![图片](https://docimg4.docs.qq.com/image/AgAAEdPAb40_W4lJfpBPrrKGNCXrt0lg.png?w=850&h=408)

​动态权限分配​
- 课程相关权限：
- 创建课程的教师自动获得「课程所有者」角色
- 通过 user_course_access 表实现课程级权限分级（1-3级）
- 支持权限过期时间管理
- 社群权限：
- 自习室创建者获得管理权限
- 社区版主动态分配
    
数据流转

- 权限变更记录在 role_permission 表
- 权限检查通过 permission 表的 level 字段实现分级控制    
---
### 4. 学生专属流程
​功能矩阵​
|功能|权限控制|数据关联|
|-|-|-|
|资源下载|仅限授权课程|成就系统记录下载行为|
|题目提交|需教师审核|关联知识点图谱|


​学业画像构建​
- 自动采集：
- 资源浏览记录 → 兴趣标签（存储于 user_interest_tag 表）
- 错题统计 → 薄弱知识点分析（基于 error_book 表）
- 数据处理：
- 定期任务分析 learning_behavior 表数据
- 使用加权算法计算知识点掌握度
---
### 5. 教师专属流程
​权限清单​
- ​课程管理权限​
    - 创建课程（插入 course 表，关联 creator_id ）
    - 编辑课程内容（更新 course 表相关字段）
    - 归档课程（更新 course.status ）
- ​资源审核权限​
    - 审批学生上传的资源
    - 管理社区发帖内容
- ​数据分析权限​
    - 查看学生学习表现
    - 生成课堂参与度报告
​教学看板初始化​
1. 首次登录时自动生成：
    - 任教课程资源统计（查询 teacher_profile.teaching_courses 及关联资源表）
    - 班级学生活跃度热力图（分析 learning_behavior 表数据）
2. 手动配置项：
    - 教学进度提醒阈值
    - 作业批改偏好设置（存储于 teacher_profile.preferences ）
---
## 异常处理流程（涉及安全功能，后面补充
## 异常处理流程
1. 账号安全异常
   
   - 连续登录失败：临时锁定账号（30分钟）
   - 异地登录：发送安全提醒邮件
   - 敏感操作：要求二次验证
2. 数据一致性保障
   
   - 关键操作日志记录（ operation_log 表）
   - 数据库操作事务管理
   - 定期数据完整性检查
## 数据输出
- 实时输出：用户在线状态（用于自习室/社群模块）
- 定期生成：
  - 用户增长报告（管理员）
  - 班级活跃度分析（教师）
  - 学习行为简报（学生）
## 模块联动
- 向协作社群模块：提供用户身份和权限信息
- 向校园服务模块：提供身份验证和权限控制





# Ⅱ 教师智能教学模块
---
## 工作流详细描述
### 1. 教案/PPT智能生成
​输入方式​
- 教材上传（PDF/扫描件）
- 课程大纲关键词输入
- 历史教案复用修改
​处理流程​
1. 教材解析 → 自动提取章节结构/核心知识点
2. 匹配课程标准 → 生成三维目标（知识/能力/素养）
3. 智能排版：
    - 教案：按"导入-讲授-练习-小结"框架自动填充
    - PPT：根据知识点量自动分页 + 配图建议
​输出控制​
- 支持多模板选择（传统/探究式/项目式）
- 手动调整锁定区（校徽/固定版式等）
---
### 2. 智能出题系统
​试卷生成​
|类型|参数设置|特殊功能|
|-|-|-|
|仿真整套|题量/难度比例/知识点覆盖|自动生成AB卷|
|章节专项|指定章节/题型过滤|关联知识点错题重练|
|分难度组卷|根据教师选择的难度等级（L1-L3）|从题库筛选对应题目（关联知识图谱知识点）|

基于知识点权重（ question_knowledge_weight.weight ）筛选题目

​作业生成​
- 智能组题：从题库抽取L1-L2难度题目（按最近错题优先）
- 支持插入多媒体题（实验视频分析/语音跟读等）
​批改辅助​
- 客观题：自动批改 + 错误知识点标注（更新 error_book 表）
- 主观题：AI评分建议（语法/逻辑/知识点应用）
---
### 3. 错题解析引擎
​处理流程​
1. 错题采集：
    - 扫描识别（支持手写体OCR）
    - 系统直接捕获在线作答数据
2. 归因分析：
    - 知识点缺陷（关联课程图谱）
    - 解题路径偏差（步骤比对）
    - 错误类型标签（存储于 error_book.error_tags ）    
3. 详解生成：
    - 基础版：分步解答+同类题推荐
    - 增强版：大模型生成易错点情景对话
​输出形式​
- 学生端：交互式错题本（支持步骤折叠/批注）
- 教师端：班级错题热力图（TOP3错误类型统计）
---
### 4. 课程知识图谱管理
​构建方式​
- 自动构建：解析教材目录+教案关键词
- 手动优化：教师拖拽调整关联权重

数据结构

- 基于 knowledge_point 表，使用 prerequisites 字段存储前置知识点
- CHECK约束确保知识图谱为DAG结构，防止循环依赖

​可视化功能​

|视图类型|交互操作|教学应用场景|
|-|-|-|
|树状图|节点展开/折叠|备课进度检查|
|热力分布图|按掌握程度颜色分级|复习课重点确定|
|(有待商量)| | |


            
            
​动态更新​
- 随作业/考试数据自动强化薄弱知识点关联
- 支持版本回溯（按教学周期保存快照）
---

数据流转

- 知识点存储在 knowledge_point 表
- 前置知识点通过 prerequisites 字段存储，采用CHECK约束确保DAG无循环

​核心指标​
- 班级整体：知识点掌握率趋势曲线
- 个体追踪：学生成长路径雷达图

# Ⅲ 学情模块
通过多维度数据采集与分析，构建学生知识掌握图谱，为教师提供精准学情报告，为学生提供个性化学习路径推荐。
---
## 工作流详细描述
### 1. 一键导出学情报告（教师端）

​用户角色​
- 教师：专业/班级/个人三级数据导出权限
​操作流程​
1. 教师选择目标范围（班级/个人）
2. 设置分析维度（知识点掌握率/学习行为/成绩趋势等）
3. 系统生成可视化报告（可自定义输出格式）
​数据来源​
- 题库作答记录（正确率/耗时/重做次数）
- 学习行为数据（视频观看完成度/笔记标注频次）
- 考试测验成绩（知识点维度得分分布）

---

### 2. 学情分析看板
​多维度数据展示​
|层级|可视化组件| |
|-|-|-|
|专业|课程通过率热力图| |
|班级|知识点掌握雷达图| |
|个人|学习行为时序图|时间序列可视化| |

​知识点掌握图谱构建​
1. 数据采集：
    - 客观题：自动标记错题关联知识点（L1-L3难度）
    - 主观题：教师批改时手动标注薄弱点
2. 图谱生成：
    - 节点：课程知识点（按教学大纲结构化）
    - 连线：红色（未掌握）/黄色（部分掌握）/绿色（已掌握）
    - 权重：根据题目难度动态调整（基于 question_knowledge_weight.weight ）

数据流转

- 知识点掌握状态通过 question_knowledge_weight 表的 weight 字段反映
- 学习行为记录在 learning_behavior 表，包含详细操作数据
---


### 3. 学生个性化学习模块
​动态学习路径推荐引擎​
​输入​
- 实时学情数据（错题本/笔记本标记重点）
- 历史学习偏好（视频/文本资源使用占比）
​处理​
1. 知识缺口分析：定位未掌握知识点及关联前置知识
2. 资源匹配：
    - 优先推荐同类错题率下降显著的学习资源
    - 自动关联知识图谱中相邻已掌握知识点资源
3. 路径生成：
    - 紧急补缺模式（考前）：高强度题目训练+速览视频
    - 系统提升模式（日常）：知识点讲解→基础题→进阶题
​输出​
- 每日学习任务卡（含预计耗时）
- 可拖拽调整的甘特图式学习计划
---
### 4. 学习工具组
​错题本智能管理​
- 自动归集：按知识点/错误类型（概念误用/计算失误等）分类
- 变式训练：对高频错题自动生成相似题目（难度可调）
- 数据存储：基于 error_book 表，使用JSON数组存储错误类型标签
​笔记本知识萃取​
- 关键词自动提取：生成思维导图骨架
- 关联资源推荐：在笔记空白处悬浮显示相关视频片段

流转

- 错题信息存储在 error_book 表，包含错误类型标签
- 笔记内容通过 learning_behavior 表的 metadata 字段存储

---
### 5. 年度学习报告（学生端）
​数据可视化方案​
- 时间轴：按月展示学习投入与成绩变化曲线
- 能力雷达图：基于霍金斯知识分类法的多维评估
- 成就对比：与同专业前10%学生数据基准线叠加显示
​生成逻辑​
1. 数据清洗：去除无效学习时长（如页面停留<30秒）
2. 特征提取：
    - 学习韧性指数（连续学习日数/中断恢复速度）
    - 知识迁移能力（跨章节题目正确率提升度）
3. 生成建议：
    - 优势巩固建议（如"您的空间推理能力突出，可尝试XX拓展课程"）
    - 改进方案（如"每周三晚上您的学习效率下降40%，建议调整作息"）

数据流转

- 年度报告基于 learning_behavior 和 learning_report 表数据生成
- 报告结果可导出为PDF或在线分享

---
## 权限隔离
|功能|教师权限|学生权限|
|-|-|-|
|班级知识点热力图|查看/对比/导出|仅查看个人数据|
|学习路径干预|手动调整推荐权重|自主选择是否采纳推荐|
|预警信息|接收所有学生预警|仅接收个人预警|


> ​系统联动​：本模块数据同步至IV资源推荐模块，作为个性化推荐的底层依据之一。
# IV 资源管理与推荐（课程级）
## 模块概述
围绕课程核心单位，实现教学资源的统一管理、智能分类和个性化推荐，服务于教师备课和学生学习。
---
## 工作流详细描述
### 1. 资源上传与审核
​用户角色​
- 教师：直接上传权限
- 学生：需教师审核后生效
​资源种类​
教案、PPT、教材、网课等
题目：单选、多选、填空、主观（含L1-L3难度分级）
​操作流程​
1. 用户选择目标课程
2. 上传资源并标注类型
3. 系统自动绑定资源至该课程
4. 若学生上传则触发教师审核流程（系统通知 → 审核操作 → 结果反馈）
​特殊处理​
- 若上传资源类型为教材 → 自动触发题库、教案、PPT生成流程
- 若为其他则自动存入资源库
- 网课 → 语音识别 + 时间戳标记

数据流转

- 知识点存储在 knowledge_point 表
- 知识点与题目关联通过 question_knowledge_weight 表实现

---
### 2. 智能分类与课程知识图谱关联
​多模态分析​
- 教材解析：自动生成章节题库、推荐教案框架、PPT模板
- 视频处理：语音转文字 + 知识点片段切分（按时间戳）
知识图谱构建
- 层级结构：课程 → 章节 → 知识点 → 关联资源
- 智能关联：知识点与题库题目自动映射（基于 question_knowledge_weight 表）
- 防环机制：知识点表的 prerequisites 字段通过CHECK约束确保DAG无循环
---
### 3. 资源存储与权限管理
​数据结构
​
![图片](https://docimg2.docs.qq.com/image/AgAAEdPAb40xhR2vwCZA440Lvsr6-Znk.png?w=865&h=224)

​
​权限控制​
- 教师：编辑/共享所有课程资源
- 学生：查看/下载授权资源（公开题库 + 网课）
- 基于 user_course_access 表实现课程级权限分级
​资源检索​
按课程、章节、知识点、资源类型、上传者等多维度筛选
---

### 4. 知识库（资料问答助手）
基于课程资源库构建的智能问答助手，支持师生通过自然语言快速获取课程相关知识、题目解析、教学辅助等内容。
​输入-用户提问​
- 知识点查询 → 从教材、教案、网课中提取定义 + 示例
- 题目解析 → 给出分步解答
- 教学辅助请求 → 关联PPT/网课中的对应片段
- 课程内容摘要 → 提取总结教材/教案/PPT中的关键内容
​处理-AI引擎工作​
1. 语义理解
2. 多模态检索关联资源
3. 答案生成
技术实现

- 参考图书馆咨询助手实现方式
- 知识库配置：上传课程资源文档
- 向量数据库：使用Milvus存储文档向量
- GPT提示词：配置专门的课程问答提示词
输出

- 输出类型：文本/分步解答/多媒体链接（视频时间戳）/交互式追问
- 支持用户连续对话深化问题
- 引用来源：自动标注信息来源，支持跳转原始资料


---
### 5. 课程资源推荐
推荐算法

- 基于内容：分析资源特征与用户历史偏好匹配
- 协同过滤：相似用户的资源使用模式
- 知识图谱增强：基于学习路径推荐相关资源
个性化因素

- 学习进度：优先推荐当前学习阶段资源
- 学习风格：视频/文本/互动偏好适配
- 掌握程度：根据知识点掌握情况调整难度
流程图 选定课程 → 上传资源 → 智能分析 → 存入课程资源库 → 个性化推荐

## 模块联动
- 从用户模块：获取用户偏好和权限信息
- 从学情模块：获取知识点掌握情况
- 从教师智能教学模块：获取AI生成的教学资源
- 向协作社群模块：提供热门资源数据
---
# V 协作与社群管理模块
此模块旨在通过线上互动、社交学习、成就激励，增强师生及学生间的交流与合作，提供实时线上自习室、智能学习计时、交流社区和学习成就系统等功能。

---
### 1. 实时线上自习室（加入/创建）
|类型|加入方式|音视频权限|
|-|-|-|
|公开|房间号直连|按模式|
|私密|密码|按模式|


​功能特性​
- 双模式选择：静默模式（纯计时）/讨论模式（音视频交流）
- 实时数据看板：成员列表、专注时长排行榜
- 成就系统联动：自动记录学习时长
​学习计时与互动​
- 自动计时：进入即开始正计时，退出时同步数据至成就系统。
- 互动管理：
    - 点击开启摄像头。
    - 长按麦克风发言。
- 输出：实时更新房间专注时长排行榜（个人 + 全员）。
---
数据流转

- 自习室信息存储在 study_room 表
- 成员状态通过MQ消息队列实时同步
- 学习时长记录在 study_timer 表

### 2. 智能学习计时
|模式|特性|数据输出|
|-|-|-|
|标准计时|正/倒计时设置|专注曲线图|
|番茄钟模式|25分钟专注 + 5分钟休息循环|中断统计与改进建议|


​输入​
用户选择计时模式（正计时/倒计时），设置目标（如“专注45分钟”）。
​处理​
- 计时期间屏蔽其他应用通知（可选）。
- 中断时弹窗提示记录原因（如“接电话”“休息”）。
​输出​
- 计时数据同步至成就系统，生成专注曲线图（按日/周可视化）。
- 中断统计：分析用户分心原因，提供改进建议（如“您本周80%中断源于手机通知”）。
---


### 3. 交流社区
​功能组件​
- 发帖系统：支持文字/图片/附件
- 标签管理：自动关联学科标签
- 打卡机制：连续打卡成就奖励，支持生成个人打卡日历。
- 功能：发送/浏览/删除/评论/点赞（有相应的推送通知）
---
### 4. 学习成就系统
​数据整合​
专注时长、课程的作业/测验分数
​可视化方案​
- 徽章系统（一定的专注时长触发奖励）
- 专注时长多维度统计图表（日/周/月/年）
- 支持生成个人打卡日历
> ​注​：以上均为学生端。教师端可查看课程同学的专注时长/徽章系统/打卡日历等信息。
---


# VI 校园服务模块
|服务类别|功能要点|技术实现|
|-|-|-|
|多语言支持|界面/内容自动翻译|翻译API集成|
|知识问答|学校规章制度/课程信息匹配|NLP文档解析|
|教务系统|智能排课/选课/考试安排|冲突检测算法、多并发|
|空间预约|场地时段管理|实时库存校验|
|校园导航|AR实景/平面导航 + 语音提示|定位技术|


---
### 1. 多语言支持
- 页面与内容自动翻译
### 2. 校园知识问答
- 学校规章制度 → NLP匹配学校文档库
- 专业课程信息 → 关联教务系统课程数据库
- 校园活动咨询 → 抓取校园活动日历
- 高频问题自动生成FAQ置顶
---
![图片](https://docimg10.docs.qq.com/image/AgAAEdPAb43NIvhufjxHD4H52-cSavMt.png?w=865&h=532)


### 3. 教务系统
​教师智能排课系统​
- 输入：教师提交时间偏好、课程容量
- 处理：AI避开冲突时段，优化教室利用率
- 输出：自动生成课表
​学生智能选课系统​
- 选课
    - 输入：学生选择课程
    - 处理：实时显示剩余名额 + 冲突检测（时间）
    - 输出：选课结果
- 课表查询
​智能考试安排​
- 输入：教务老师录入考试科目、监考老师
- 处理：自动分配考场（人数、课程关联性） + 冲突检测
- 输出：
    - 教师端：监考安排表
    - 学生端：考试通知（推送 + 邮件）
​特殊申请​
- 输入：学生提交缓考申请
- 处理：教师审批 → 备案 → 状态追踪
​成绩单打印
​
![图片](https://docimg6.docs.qq.com/image/AgAAEdPAb42o6Li1GbFIn7GlimeeHLHb.png?w=861&h=414)

​
---
### 4. 预约空间
- 输入：用户选择场地、时间段
- 输出：成功与否 + 预约凭证
---
### 5. 校园导航
- 输入：用户输入起始地、目的地
- 输出：AR实景导航/平面导航 + 语音提示
​权限隔离​：教务管理员、学生、教师