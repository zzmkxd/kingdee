# 移动表单开发

## 功能简介

> 顾名思义，移动表单就是对我们的表单等页面进行移动端的开发，使得我们制作的表单和页面能够在移动端中呈现。

## 种类介绍

> 移动端主要分为三大类，分别为**移动表单、移动动态表单、移动列表**

![3-移动列表](.\assets\7.1-assets\3-移动列表.png)

![1-移动版动态表单](.\assets\7.1-assets\1-移动版动态表单.png)

![2-移动表单](.\assets\7.1-assets\2-移动表单.png)

其中，**移动表单和移动列表**可以在单据或基础资料表单中进行编辑和开发，目的是与基础资料或单据的数据进行绑定，实现移动端操作数据的功能。

移动动态表单则需要自行创建，可用于首页、个人等其他页面的呈现。

## 使用方法

### 移动动态表单

#### 创建表单

在页面处，点击新增按钮，选择**移动端**，选择**表单**

![1-移动版动态表单](.\assets\7.1-assets\1-移动版动态表单.png)

创建成功之后，来到移动动态表单的编辑页。该页面的结构跟其余表单的页面结构相似，除此之外，移动动态表单也新增了一些其他的功能。

![4-移动动态表单编辑页](.\assets\7.1-assets\4-移动动态表单编辑页.png)

#### 编辑表单

在移动页面右方的编辑框中，我们可以找到**模板**按钮，来创建相应的模板

![5-移动动态表单模板](.\assets\7.1-assets\5-移动动态表单模板.png)

点击之后，可对动态表单进行模板的选择

![6-模板选择](.\assets\7.1-assets\6-模板选择.png)

除此之外，该表单也支持单独添加场景卡片来设计页面的功能。

![7-场景卡片模板](.\assets\7.1-assets\7-场景卡片模板.png)

#### 保存表单

添加成功之后，点击保存，可对移动动态表单进行预览。至此，一个基本的移动动态表单就设计完成。

![8-手机预览](.\assets\7.1-assets\8-手机预览.png)

#### 添加功能

在完成移动动态表单的页面基础开发之后，我们可以为页面的按钮添加功能。选中某个按钮，我们可以为此添加操作代码

![15-移动首页添加操作代码](.\assets\7.1-assets\15-移动首页添加操作代码.png)

在此我们以跳转移动表单为例，点击操作代码右方的按钮，选择操作，填写弹窗表单

![16-选择操作](.\assets\7.1-assets\16-选择操作.png)

添加完成后，点击保存，进行预览，点击按钮

![17-点击按钮](.\assets\7.1-assets\17-点击按钮.png)

我们可以看到点击之后弹出了相应的移动表单

![18-跳转移动表单](.\assets\7.1-assets\18-跳转移动表单.png)

因此，我们可以利用苍穹自带的操作代码来为按钮添加功能，当然我们也可以使用插件的方式来进行功能的添加。

### 移动表单

在单据或基础资料表单中，我们可以在顶部导航栏中看到除了表单、列表之外，还有移动表单和移动列表。点击移动表单，我们可以进行移动表单的设计。

在表单中，我们可以直接通过点击左方的字段来进行表单字段的添加。

![9-移动表单设计](.\assets\7.1-assets\9-移动表单设计.png)

添加完成后，我们同样可以根据右方的属性栏进行属性的调整，调整完成后进行保存

![10-调整布局后保存](.\assets\7.1-assets\10-调整布局后保存.png)

### 移动列表

在移动列表中，同样可以通过点击左方实体栏中的字段实体进行字段的添加，同时也可以在右方的属性栏中进行样式的修改。

![11-移动列表设计](.\assets\7.1-assets\11-移动列表设计.png)

保存列表后，点击预览可进入列表预览界面

![12-预览列表](.\assets\7.1-assets\12-预览列表.png)

点击列表中的元素，可以跳转到该数据所在的移动表单

![13-点击列表元素](.\assets\7.1-assets\13-点击列表元素.png)

### 插件开发

> 其实，移动表单、移动列表和移动动态表单的插件开发和PC端类似，只是更换了继承类。

> - 如移动端动态表单界面插件的基类为 **AbstractMobFormPlugin**，派生自动态表单插件基类**AbstractFormPlugin**。移动端动态表单插件，必须从插件基类**AbstractMobFormPlugin**中派生。
> - 对于移动表单和移动列表也是同样的，只需要在相应的**AbstrtactListPlugin、AbstractBasePlugIn**或**AbstractBillPlugIn**类名中加一个“Mob”即可。
> - 其余编写方法和PC端相同，使用同样的事件和函数进行事件监测和操作即可。

![14-移动表单继承插件](.\assets\7.1-assets\14-移动表单继承插件.png)

再举一个例子，如在移动动态表单中给按钮绑定事件，则也是同样的方法

```java
public class BookMobPlugin extends AbstractMobFormPlugin {
    @Override
    public void registerListener(EventObject e) {
        super.registerListener(e);
        Button button = this.getControl("ozwe_buttonap");
    }
    @Override
    public void click(EventObject e) {
        super.click(e);
        // 如果是确定按钮，则取到人员的数据，返回给父页面
        Control control = (Control) e.getSource();
        if ("ozwe_buttonap".equalsIgnoreCase(control.getKey())) {
            this.getView().showMessage("Hello World");
        }
    }
}
```

这样就可以在移动表单中弹出一个弹窗消息“Hello World”
